{% extends 'base_layout.html' %}
{% block content %}

    <style>
        .bg-green {
            color: #021002;
            background-color: #27a721 !important;
        }

    </style>

    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            {{ obj.name }}

        </h1>
        <ol class="breadcrumb">
            {% if  user.groups.all.0.name == 'Admin' %}
                <li><a href="{% url 'kurye:admin-dashboard' %}"><i class="fa fa-dashboard"></i> Anasayfa</a></li>
            {% elif user.groups.all.0.name == 'Kullanıcı' %}
                <li><a href="{% url 'kurye:kullanıcı-dashboard' %}"><i class="fa fa-dashboard"></i> Anasayfa</a></li>
            {% else %}
                <li><a href="{% url 'kurye:kurye-dashboard' %}"><i class="fa fa-dashboard"></i> Anasayfa</a></li>
            {% endif %}
            <li><a href="">{{ parent.name }}</a></li>
            <li><a href="">{{ obj.name }}</a></li>
        </ol>

    </section>

    <!-- Main content -->
    <section class="content">

        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <!-- The time line -->
                <ul class="timeline">
                    {% regroup tasks by creationDate.date as task_list %}
                    {% for task in task_list %}
                        <!-- timeline time label -->
                        <li class="time-label">
                  <span class="bg-purple-gradient">
                    {{ task.grouper }}
                  </span>
                        </li>
                        <!-- /.timeline-label -->
                        <!-- timeline item -->
                        {% for data in task.list %}
                            <li>
                                <i class="fa fa-clock-o bg-green"></i>

                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-clock-o"></i> {{ data.creationDate }}</span>

                                    <h3 class="timeline-header"><a>Görev
                                        ID: {{ data.task.pk }} </a>
                                        {% if data.task_situation.name == 'İptal Edildi' %}
                                            <span class="label label-danger"> {{ data.task_situation.name }}</span>
                                            </h3>
                                        {% elif data.task_situation.name == 'Kurye Atandı' %}
                                            <span class="label label-warning"> {{ data.task_situation.name }}</span>
                                            </h3>
                                        {% elif data.task_situation.name == 'Paket Teslimi İçin Yolda' or data.task_situation.name == 'Paket Alımı İçin Yolda' %}
                                            <span class="label label-warning"> {{ data.task_situation.name }}</span>
                                            </h3>
                                        {% else %}
                                            <span class="label label-primary"> {{ data.task_situation.name }}</span>


                                        {% endif %}
                                    <div class="timeline-body">
                                        <b>Talep No:  {{ data.task.request.pk }} </b>
                                        <br>
                                        <b>Kurye: </b> {{ data.task.courier.courier.user.first_name }} {{ data.task.courier.courier.user.last_name }}
                                        <br>
                                        <b>Müşteri: </b> {{ data.task.request.receiver.customer }} <br>
                                        <b>Görev Oluşturma Zamanı : {{ data.creationDate }}</b> <br>
                                        <b>Teslim Edilecek Zaman
                                            : {{ data.task.request.exitDate }} {{ data.task.request.exitTime }}  </b><br>
                                        {% if data.task_situation == 'Teslim Edildi' or  data.task_situation == 'Teslim Edilemedi' %}
                                            <b>Teslim Edilme/Edilememe Zamanı: {{ data.task.deliverTime }}</b><br>
                                            <b>Kurye Açıklaması : {{ data.task.description }}</b>
                                        {% endif %}


                                    </div>

                                </div>
                            </li>

                        {% endfor %}
                    {% endfor %}
                    <!-- END timeline item -->
                    <li>
                        <i class="fa fa-clock-o bg-gray"></i>
                    </li>
                </ul>
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->


    </section>
    <!-- /.content -->




{% endblock %}